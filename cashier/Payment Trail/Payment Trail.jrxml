<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.8.0.final using JasperReports Library version 6.8.0-2ed8dfabb690ff337a5797129f2cd92902b0c87b  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Payment Trail" pageWidth="842" pageHeight="595" orientation="Landscape" whenNoDataType="NoDataSection" columnWidth="842" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isIgnorePagination="true" uuid="8a465670-cc4a-4270-965f-8efb86e33b71">
	<property name="template.engine" value="tabular_template"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="postgres UAT2 "/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<style name="Table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
			<topPen lineWidth="1.0" lineColor="#000000"/>
			<leftPen lineWidth="1.0" lineColor="#000000"/>
			<bottomPen lineWidth="1.0" lineColor="#000000"/>
			<rightPen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="Table_TH" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Table_CH" mode="Opaque" backcolor="#EFEFEF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="tableDataset" uuid="1cb87e7b-4d77-4091-9dae-89707248c7d9">
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="postgres UAT2 "/>
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<parameter name="c_bpartner_uu" class="java.lang.String">
			<parameterDescription><![CDATA[Patient UUID]]></parameterDescription>
		</parameter>
		<parameter name="AD_CLIENT_ID" class="java.lang.Integer" isForPrompting="false"/>
		<queryString language="SQL">
			<![CDATA[;WITH payments as (
	SELECT
		p1.c_payment_id,
		p1.c_bpartner_id,
		p1.bh_c_order_id,
		date(p1.created) as date,
		p1.tendertype,
		p1.payamt
	FROM adempiere.c_payment p1
	INNER JOIN adempiere.c_bpartner bp on p1.c_bpartner_id = bp.c_bpartner_id
	LEFT JOIN adempiere.c_payment p2
		ON p2.docstatus = 'RE'
			AND p2.reversal_id = p1.c_payment_id
			AND p1.c_bpartner_id = p2.c_bpartner_id
	WHERE bp.c_bpartner_uu = $P{c_bpartner_uu} -- UPDATE - this is the person's ID parameter
		AND p1.payamt IS NOT NULL
		AND p2.c_payment_id IS NULL
		AND p1.docstatus != 'RE'
		AND p1.ad_client_id = $P{AD_CLIENT_ID}
), transactions as (
	SELECT
		name,
		date,
		item,
		charges,
		visit_payments,
		open_balance_payments,
		open_balance,
		row_number() over (order by sort, date) as row
	FROM (
		SELECT
			name,
			date,
			CASE WHEN charges = 0 THEN 'Open balance payment only' ELSE 'Visit Charges and payments' END AS item,
			charges,
			visit_payments * -1 as visit_payments,
			open_balance_payments * -1 as open_balance_payments,
			SUM(line_total) OVER (PARTITION BY name ORDER BY date ROWS UNBOUNDED PRECEDING) as open_balance,
			2 as sort
		FROM (
			SELECT
				name,
				date,
				SUM(charges) as charges,
				SUM(visit_payments) as visit_payments,
				SUM(open_balance_payments) as open_balance_payments,
				SUM(charges) + SUM(visit_payments) + SUM(open_balance_payments) AS line_total
			FROM (
				SELECT
					Name,
					Date,
					COALESCE(SUM(grandtotal) FILTER (WHERE type = 'Visit'), 0) AS charges,
					COALESCE(SUM(grandtotal) FILTER (WHERE type = 'Bill Payment' OR type = 'Insurance, Waivers, and Deductions'), 0) AS visit_payments,
					COALESCE(SUM(grandtotal) FILTER (WHERE type = 'Outstanding Balance Payment'), 0) AS open_balance_payments
				FROM (
					-- Bills
					SELECT
						o.c_order_id,
						bp.name,
						o.c_bpartner_id,
						date(o.created) as date,
						'Visit' as "type",
						o.grandtotal,
						10 as sort
					FROM adempiere.c_order o
					INNER JOIN adempiere.c_bpartner bp
						ON o.c_bpartner_id = bp.c_bpartner_id
					INNER JOIN payments cp
						ON cp.c_bpartner_id = bp.c_bpartner_id
					WHERE o.issotrx='Y'
						AND o.docstatus='CO'
					UNION
					-- Insurance, waivers, and deductions
					SELECT
						co.c_order_id,
						bp.name,
						cp.c_bpartner_id,
						cp.date,
						'Insurance, Waivers, and Deductions' as "type",
						cp.totalpayamt * -1,
						20 as sort
					FROM (
						SELECT
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date,
							SUM(payamt) as totalpayamt
						FROM payments
						WHERE tendertype NOT IN ('A','C','K','X','D','M','MT')
						GROUP BY
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date
					) cp
					INNER JOIN adempiere.c_bpartner bp
						ON cp.c_bpartner_id = bp.c_bpartner_id
					LEFT JOIN adempiere.c_allocationline cal
						ON cal.c_payment_id = cp.c_payment_id
					LEFT JOIN adempiere.c_invoice i
						ON i.c_invoice_id = cal.c_invoice_id
					INNER JOIN adempiere.c_order co
						ON i.c_order_id = co.c_order_id
								OR co.c_order_id = cp.bh_c_order_id
					WHERE co.issotrx='Y'
						AND co.docstatus='CO'
					UNION
					-- Bill Payments
					SELECT
						co.c_order_id,
						bp.name,
						cp.c_bpartner_id,
						cp.date,
						-- CASE
						-- 	WHEN cp.tendertype IN ('M','MT') THEN 'Bill Payment - Mobile'
						-- 	WHEN cp.tendertype IN ('X') THEN 'Bill Payment - Cash'
						-- 	ELSE 'Bill Payment'
						-- END as "type",
						'Bill Payment' as "type",
						cp.totalpayamt * -1,
						30 as sort
					FROM (
						SELECT
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date,
							tendertype,
							SUM(payamt) as totalpayamt
						FROM payments
						WHERE tendertype IN ('A','C','K','X','D','M','MT')
						GROUP BY
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date,
							tendertype
					) cp
					INNER JOIN adempiere.c_bpartner bp
						ON cp.c_bpartner_id = bp.c_bpartner_id
					LEFT JOIN adempiere.c_allocationline cal
						ON cal.c_payment_id = cp.c_payment_id
					LEFT JOIN adempiere.c_invoice i
						ON i.c_invoice_id = cal.c_invoice_id
					INNER JOIN adempiere.c_order co
						ON i.c_order_id = co.c_order_id
							OR co.c_order_id = cp.bh_c_order_id
					WHERE co.issotrx='Y'
						AND co.docstatus='CO'
					UNION
					SELECT
						co.c_order_id,
						bp.name,
						cp.c_bpartner_id,
						cp.date,
						'Outstanding Balance Payment' as "type",
						cp.totalpayamt * -1,
						40 as sort
					FROM (
						SELECT
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date,
							SUM(payamt) as totalpayamt
						FROM payments
						GROUP BY
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date
					) cp
					INNER JOIN adempiere.c_bpartner bp
						ON cp.c_bpartner_id = bp.c_bpartner_id
					LEFT JOIN adempiere.c_allocationline cal
						ON cal.c_payment_id = cp.c_payment_id
					LEFT JOIN adempiere.c_invoice i
						ON i.c_invoice_id = cal.c_invoice_id
					LEFT JOIN adempiere.c_order co
						ON i.c_order_id = co.c_order_id
							OR co.c_order_id = cp.bh_c_order_id
					WHERE co.issotrx IS NULL
						AND co.docstatus IS NULL
				) as transactions
				GROUP BY
					Name,
					Date,
					type,
					grandtotal,
					sort,
					c_bpartner_id
			) as transactions
			GROUP BY
				name,
				date
		) as transactions
		UNION
		SELECT
			name,
			date(created) as date,
			'Starting balance',
			0 as charges,
			0 as visit_payments,
			0 as open_balance_payments,
			0 as open_balance,
			1 as sort
		FROM adempiere.c_bpartner bp
		JOIN payments p
			ON p.c_bpartner_id = bp.c_bpartner_id
	) as transactions
)
SELECT
	name,
	date,
	item,
	charges,
	visit_payments,
	open_balance_payments,
	open_balance
FROM (
	SELECT
		name,
		date,
		item,
		NULL::numeric as charges,
		NULL::numeric as visit_payments,
		NULL::numeric as open_balance_payments,
		0 as open_balance,
		row
	FROM (
		SELECT *
		FROM transactions
		WHERE item = 'Starting balance'
			-- AND date between '2020-07-19' and '2020-08-10' -- UPDATE - use start and end date parameters
	) as given_starting_balance
	UNION
	SELECT
		name,
		'2020-07-19', -- UPDATE - use start date parameter
		'Starting balance as of ' || '2020-07-19' as item, -- UPDATE - use start date parameter (formatted as needed)
		NULL as charges,
		NULL as visit_payments,
		NULL as open_balance_payments,
		open_balance,
		0 as row
	FROM (
		SELECT *
		FROM transactions
		-- WHERE date < '2020-07-19' -- UPDATE - use start date parameter
		WHERE date < '2010-01-01' -- REMOVE - when we use the start/end dates and use the line above
		ORDER BY row desc
		LIMIT 1
	) as calculated_starting_balance
	UNION
	SELECT
		name,
		date,
		item,
		CASE WHEN charges = 0 and visit_payments = 0 THEN NULL ELSE charges END as charges,
		CASE WHEN charges = 0 and visit_payments = 0 THEN NULL ELSE visit_payments END as visit_payments,
		CASE WHEN open_balance_payments = 0 THEN NULL ELSE open_balance_payments END as open_balance_payments,
		open_balance,
		row
	FROM transactions
	-- WHERE date between '2020-07-19' and '2020-08-10' -- UPDATE - use start and end date parameters
	WHERE item != 'Starting balance' -- REMOVE - when we use the start/end dates and use the line above
) as payments
order by row]]>
		</queryString>
		<field name="name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="name"/>
		</field>
		<field name="date" class="java.sql.Date">
			<property name="com.jaspersoft.studio.field.label" value="date"/>
		</field>
		<field name="item" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="item"/>
		</field>
		<field name="charges" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="charges"/>
		</field>
		<field name="visit_payments" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="visit_payments"/>
		</field>
		<field name="open_balance_payments" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="open_balance_payments"/>
		</field>
		<field name="open_balance" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="open_balance"/>
		</field>
	</subDataset>
	<parameter name="c_bpartner_uu" class="java.lang.String">
		<parameterDescription><![CDATA[Patient UUID]]></parameterDescription>
	</parameter>
	<parameter name="AD_CLIENT_ID" class="java.lang.Integer" isForPrompting="false"/>
	<queryString>
		<![CDATA[;WITH payments as (
	SELECT
		p1.c_payment_id,
		p1.c_bpartner_id,
		p1.bh_c_order_id,
		date(p1.created) as date,
		p1.tendertype,
		p1.payamt
	FROM adempiere.c_payment p1
	INNER JOIN adempiere.c_bpartner bp on p1.c_bpartner_id = bp.c_bpartner_id
	LEFT JOIN adempiere.c_payment p2
		ON p2.docstatus = 'RE'
			AND p2.reversal_id = p1.c_payment_id
			AND p1.c_bpartner_id = p2.c_bpartner_id
	WHERE bp.c_bpartner_uu = $P{c_bpartner_uu} -- UPDATE - this is the person's ID parameter
		AND p1.payamt IS NOT NULL
		AND p2.c_payment_id IS NULL
		AND p1.docstatus != 'RE'
		AND p1.ad_client_id = $P{AD_CLIENT_ID}
), transactions as (
	SELECT
		name,
		date,
		item,
		charges,
		visit_payments,
		open_balance_payments,
		open_balance,
		row_number() over (order by sort, date) as row
	FROM (
		SELECT
			name,
			date,
			CASE WHEN charges = 0 THEN 'Open balance payment only' ELSE 'Visit Charges and payments' END AS item,
			charges,
			visit_payments * -1 as visit_payments,
			open_balance_payments * -1 as open_balance_payments,
			SUM(line_total) OVER (PARTITION BY name ORDER BY date ROWS UNBOUNDED PRECEDING) as open_balance,
			2 as sort
		FROM (
			SELECT
				name,
				date,
				SUM(charges) as charges,
				SUM(visit_payments) as visit_payments,
				SUM(open_balance_payments) as open_balance_payments,
				SUM(charges) + SUM(visit_payments) + SUM(open_balance_payments) AS line_total
			FROM (
				SELECT
					Name,
					Date,
					COALESCE(SUM(grandtotal) FILTER (WHERE type = 'Visit'), 0) AS charges,
					COALESCE(SUM(grandtotal) FILTER (WHERE type = 'Bill Payment' OR type = 'Insurance, Waivers, and Deductions'), 0) AS visit_payments,
					COALESCE(SUM(grandtotal) FILTER (WHERE type = 'Outstanding Balance Payment'), 0) AS open_balance_payments
				FROM (
					-- Bills
					SELECT
						o.c_order_id,
						bp.name,
						o.c_bpartner_id,
						date(o.created) as date,
						'Visit' as "type",
						o.grandtotal,
						10 as sort
					FROM adempiere.c_order o
					INNER JOIN adempiere.c_bpartner bp
						ON o.c_bpartner_id = bp.c_bpartner_id
					INNER JOIN payments cp
						ON cp.c_bpartner_id = bp.c_bpartner_id
					WHERE o.issotrx='Y'
						AND o.docstatus='CO'
					UNION
					-- Insurance, waivers, and deductions
					SELECT
						co.c_order_id,
						bp.name,
						cp.c_bpartner_id,
						cp.date,
						'Insurance, Waivers, and Deductions' as "type",
						cp.totalpayamt * -1,
						20 as sort
					FROM (
						SELECT
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date,
							SUM(payamt) as totalpayamt
						FROM payments
						WHERE tendertype NOT IN ('A','C','K','X','D','M','MT')
						GROUP BY
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date
					) cp
					INNER JOIN adempiere.c_bpartner bp
						ON cp.c_bpartner_id = bp.c_bpartner_id
					LEFT JOIN adempiere.c_allocationline cal
						ON cal.c_payment_id = cp.c_payment_id
					LEFT JOIN adempiere.c_invoice i
						ON i.c_invoice_id = cal.c_invoice_id
					INNER JOIN adempiere.c_order co
						ON i.c_order_id = co.c_order_id
								OR co.c_order_id = cp.bh_c_order_id
					WHERE co.issotrx='Y'
						AND co.docstatus='CO'
					UNION
					-- Bill Payments
					SELECT
						co.c_order_id,
						bp.name,
						cp.c_bpartner_id,
						cp.date,
						-- CASE
						-- 	WHEN cp.tendertype IN ('M','MT') THEN 'Bill Payment - Mobile'
						-- 	WHEN cp.tendertype IN ('X') THEN 'Bill Payment - Cash'
						-- 	ELSE 'Bill Payment'
						-- END as "type",
						'Bill Payment' as "type",
						cp.totalpayamt * -1,
						30 as sort
					FROM (
						SELECT
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date,
							tendertype,
							SUM(payamt) as totalpayamt
						FROM payments
						WHERE tendertype IN ('A','C','K','X','D','M','MT')
						GROUP BY
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date,
							tendertype
					) cp
					INNER JOIN adempiere.c_bpartner bp
						ON cp.c_bpartner_id = bp.c_bpartner_id
					LEFT JOIN adempiere.c_allocationline cal
						ON cal.c_payment_id = cp.c_payment_id
					LEFT JOIN adempiere.c_invoice i
						ON i.c_invoice_id = cal.c_invoice_id
					INNER JOIN adempiere.c_order co
						ON i.c_order_id = co.c_order_id
							OR co.c_order_id = cp.bh_c_order_id
					WHERE co.issotrx='Y'
						AND co.docstatus='CO'
					UNION
					SELECT
						co.c_order_id,
						bp.name,
						cp.c_bpartner_id,
						cp.date,
						'Outstanding Balance Payment' as "type",
						cp.totalpayamt * -1,
						40 as sort
					FROM (
						SELECT
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date,
							SUM(payamt) as totalpayamt
						FROM payments
						GROUP BY
							c_payment_id,
							c_bpartner_id,
							bh_c_order_id,
							date
					) cp
					INNER JOIN adempiere.c_bpartner bp
						ON cp.c_bpartner_id = bp.c_bpartner_id
					LEFT JOIN adempiere.c_allocationline cal
						ON cal.c_payment_id = cp.c_payment_id
					LEFT JOIN adempiere.c_invoice i
						ON i.c_invoice_id = cal.c_invoice_id
					LEFT JOIN adempiere.c_order co
						ON i.c_order_id = co.c_order_id
							OR co.c_order_id = cp.bh_c_order_id
					WHERE co.issotrx IS NULL
						AND co.docstatus IS NULL
				) as transactions
				GROUP BY
					Name,
					Date,
					type,
					grandtotal,
					sort,
					c_bpartner_id
			) as transactions
			GROUP BY
				name,
				date
		) as transactions
		UNION
		SELECT
			name,
			date(created) as date,
			'Starting balance',
			0 as charges,
			0 as visit_payments,
			0 as open_balance_payments,
			0 as open_balance,
			1 as sort
		FROM adempiere.c_bpartner bp
		JOIN payments p
			ON p.c_bpartner_id = bp.c_bpartner_id
	) as transactions
)
SELECT
	name,
	date,
	item,
	charges,
	visit_payments,
	open_balance_payments,
	open_balance
FROM (
	SELECT
		name,
		date,
		item,
		NULL::numeric as charges,
		NULL::numeric as visit_payments,
		NULL::numeric as open_balance_payments,
		0 as open_balance,
		row
	FROM (
		SELECT *
		FROM transactions
		WHERE item = 'Starting balance'
			-- AND date between '2020-07-19' and '2020-08-10' -- UPDATE - use start and end date parameters
	) as given_starting_balance
	UNION
	SELECT
		name,
		'2020-07-19', -- UPDATE - use start date parameter
		'Starting balance as of ' || '2020-07-19' as item, -- UPDATE - use start date parameter (formatted as needed)
		NULL as charges,
		NULL as visit_payments,
		NULL as open_balance_payments,
		open_balance,
		0 as row
	FROM (
		SELECT *
		FROM transactions
		-- WHERE date < '2020-07-19' -- UPDATE - use start date parameter
		WHERE date < '2010-01-01' -- REMOVE - when we use the start/end dates and use the line above
		ORDER BY row desc
		LIMIT 1
	) as calculated_starting_balance
	UNION
	SELECT
		name,
		date,
		item,
		CASE WHEN charges = 0 and visit_payments = 0 THEN NULL ELSE charges END as charges,
		CASE WHEN charges = 0 and visit_payments = 0 THEN NULL ELSE visit_payments END as visit_payments,
		CASE WHEN open_balance_payments = 0 THEN NULL ELSE open_balance_payments END as open_balance_payments,
		open_balance,
		row
	FROM transactions
	-- WHERE date between '2020-07-19' and '2020-08-10' -- UPDATE - use start and end date parameters
	WHERE item != 'Starting balance' -- REMOVE - when we use the start/end dates and use the line above
) as payments
order by row
limit 1]]>
	</queryString>
	<field name="name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="name"/>
	</field>
	<field name="date" class="java.sql.Date">
		<property name="com.jaspersoft.studio.field.label" value="date"/>
	</field>
	<field name="item" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="item"/>
	</field>
	<field name="charges" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="charges"/>
	</field>
	<field name="visit_payments" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="visit_payments"/>
	</field>
	<field name="open_balance_payments" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="open_balance_payments"/>
	</field>
	<field name="open_balance" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="open_balance"/>
	</field>
	<title>
		<band height="20" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<staticText>
				<reportElement x="0" y="0" width="842" height="20" uuid="d67a3014-1e95-40cb-afda-e47135cee9d6">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14" isBold="true" isItalic="false"/>
				</textElement>
				<text><![CDATA[Payment Trail Report]]></text>
			</staticText>
		</band>
	</title>
	<summary>
		<band height="47" splitType="Stretch">
			<property name="local_mesure_unitheight" value="pixel"/>
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<componentElement>
				<reportElement x="0" y="0" width="842" height="47" uuid="3e4b0706-110d-4350-965f-b7991cc5c35f">
					<property name="com.jaspersoft.studio.table.style.table_header" value="Table_TH"/>
					<property name="com.jaspersoft.studio.table.style.column_header" value="Table_CH"/>
					<property name="com.jaspersoft.studio.table.style.detail" value="Table_TD"/>
				</reportElement>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="tableDataset" uuid="3d24d28f-1b10-4c78-9df4-859159fc1372">
						<datasetParameter name="AD_CLIENT_ID">
							<datasetParameterExpression><![CDATA[$P{AD_CLIENT_ID}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="c_bpartner_uu">
							<datasetParameterExpression><![CDATA[$P{c_bpartner_uu}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="200" uuid="4028c9c6-8a1e-4ee6-afa7-22827ae808c9">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column1"/>
						<jr:columnHeader style="Table_CH" height="30">
							<staticText>
								<reportElement x="0" y="0" width="200" height="30" uuid="d0360a46-bf2e-4908-ad46-6a2e15facb87"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Name]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<textField isStretchWithOverflow="true" isBlankWhenNull="true">
								<reportElement stretchType="ContainerHeight" x="0" y="0" width="200" height="17" uuid="89b3b808-9441-4556-8f0e-9015e6ee4243">
									<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
								</reportElement>
								<box leftPadding="2"/>
								<textElement verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12"/>
									<paragraph leftIndent="2"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90" uuid="6497a338-fad9-419e-8a85-2adecf2f8f00">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column2"/>
						<jr:columnHeader style="Table_CH" height="30">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="6840cec5-fc8c-4f50-a67a-2f5f528340e6"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Date]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField isStretchWithOverflow="true" pattern="yyyy-MM-dd" isBlankWhenNull="true">
								<reportElement stretchType="ContainerHeight" x="0" y="0" width="90" height="17" uuid="2f28918f-a3e9-4f69-9060-f198f1099951">
									<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
								</reportElement>
								<box leftPadding="2"/>
								<textElement verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12"/>
									<paragraph leftIndent="2"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{date}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="220" uuid="86573c9b-4089-4f25-8a33-720abf1cec97">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column3"/>
						<jr:columnHeader style="Table_CH" height="30">
							<staticText>
								<reportElement x="0" y="0" width="220" height="30" uuid="9ecbee3a-8cd1-4bbb-b7da-6e494b20e8d8"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[item]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField isStretchWithOverflow="true" isBlankWhenNull="true">
								<reportElement stretchType="ContainerHeight" x="0" y="0" width="220" height="17" uuid="4d37d45a-06fd-470c-88eb-8dae21df749b">
									<property name="com.jaspersoft.studio.unit.leftIndent" value="px"/>
								</reportElement>
								<box leftPadding="2"/>
								<textElement verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12"/>
									<paragraph leftIndent="2"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{item}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="70" uuid="25a4f071-81cc-44cb-b95d-229bf29d3b48">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column4"/>
						<jr:columnHeader style="Table_CH" height="30">
							<staticText>
								<reportElement x="0" y="0" width="70" height="30" uuid="c775a5de-4999-4e00-8401-c196499ce3c3"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Charges]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField isStretchWithOverflow="true" pattern="#,##0.00" isBlankWhenNull="true">
								<reportElement stretchType="ContainerHeight" x="0" y="0" width="70" height="17" uuid="967bd211-a426-4bce-9581-7c60fe5668df"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Right" verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12"/>
									<paragraph rightIndent="2"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{charges}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="80" uuid="8ae5a521-2bb7-4a48-8d58-fad8ac632528">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column5"/>
						<jr:columnHeader style="Table_CH" height="30">
							<staticText>
								<reportElement x="0" y="0" width="80" height="30" uuid="703dbf2b-7975-431e-be0d-7433dbf7d904"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Visit Payments]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField isStretchWithOverflow="true" pattern="#,##0.00" isBlankWhenNull="true">
								<reportElement stretchType="ContainerHeight" x="0" y="0" width="80" height="17" uuid="83bac46a-a4e4-45b6-b813-14f3b79274e0"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Right" verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12"/>
									<paragraph rightIndent="2"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{visit_payments}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="110" uuid="d0c6bf93-9ff5-4d62-beca-7631b9c8cd44">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column6"/>
						<jr:columnHeader style="Table_CH" height="30">
							<staticText>
								<reportElement x="0" y="0" width="110" height="30" uuid="bd76e4b9-91ed-4e22-a6e3-29f1a22cf929"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Open Balance Payments]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField isStretchWithOverflow="true" pattern="#,##0.00" isBlankWhenNull="true">
								<reportElement stretchType="ContainerHeight" x="0" y="0" width="110" height="17" uuid="dde9872f-00f1-4a1e-84a7-20cecc136a10"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Right" verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12"/>
									<paragraph rightIndent="2"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{open_balance_payments}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="72" uuid="d8d0d853-7413-4423-b19d-bd94b12e9654">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column7"/>
						<jr:columnHeader style="Table_CH" height="30">
							<staticText>
								<reportElement x="0" y="0" width="72" height="30" uuid="2374d0ea-0823-4f13-adcb-506d3128dcca"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Open Balance]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField isStretchWithOverflow="true" pattern="#,##0.00" isBlankWhenNull="true">
								<reportElement stretchType="ContainerHeight" x="0" y="0" width="72" height="17" uuid="97f797af-574c-405f-b7b2-10725107539f"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Right" verticalAlignment="Middle">
									<font fontName="DejaVu Sans" size="12"/>
									<paragraph rightIndent="2"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{open_balance}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</summary>
	<noData>
		<band height="16">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<staticText>
				<reportElement x="0" y="0" width="480" height="16" uuid="9793607b-ce74-45c0-b97f-c049483f6667">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font isBold="false" isItalic="true"/>
				</textElement>
				<text><![CDATA[No data was found to display on the report.]]></text>
			</staticText>
		</band>
	</noData>
</jasperReport>
