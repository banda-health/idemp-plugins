<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.8.0.final using JasperReports Library version 6.8.0-2ed8dfabb690ff337a5797129f2cd92902b0c87b  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="MoH705Ap2" pageWidth="940" pageHeight="585" orientation="Landscape" whenNoDataType="NoDataSection" columnWidth="940" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" isIgnorePagination="true" uuid="8a465670-cc4a-4270-965f-8efb86e33b71">
	<property name="template.engine" value="tabular_template"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="postgre UAT"/>
	<style name="Table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
			<topPen lineWidth="1.0" lineColor="#000000"/>
			<leftPen lineWidth="1.0" lineColor="#000000"/>
			<bottomPen lineWidth="1.0" lineColor="#000000"/>
			<rightPen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="Table_TH" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Table_CH" mode="Opaque" backcolor="#EFEFEF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="tableDataset" uuid="4f3ffd2a-d6a3-480d-8993-16e7645f49e4">
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="postgre UAT"/>
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<parameter name="Begin Date" class="java.util.Date"/>
		<parameter name="End Date" class="java.util.Date"/>
		<parameter name="AD_CLIENT_ID" class="java.lang.Integer" isForPrompting="false"/>
		<queryString language="SQL">
			<![CDATA[select orderbilldate.billdate as billingdate,
       coalesce(sum(newvisitcount.countnewvisit),0) as no1stattendances,
       coalesce(sum(reattendacecount.countreattendace),0) as reattendances,
       coalesce(sum(referralsfromhfcount.countreferralsfromhf),0) as referralsfromhf,
       coalesce(sum(referralstootherhfcount.countreferralstootherhf),0) as referralstootherhf,
       coalesce(sum(referalsfromcucount.countreferalsfromcu),0) as referalsfromcu,
       coalesce(sum(referaltocucount.countreferaltocu),0) as referaltocu
from
(
select distinct patient.c_bpartner_id
from c_bpartner patient
where patient.ad_client_id = $P{AD_CLIENT_ID} and patient.iscustomer = 'Y'
) as regPatient
inner join
(
select
    cobilldate.c_bpartner_id,
    date(cobilldate.dateordered) as billdate
from c_order cobilldate
where
    cobilldate.ad_client_id = $P{AD_CLIENT_ID} and (date(cobilldate.dateordered) BETWEEN date($P{Begin Date}) AND date($P{End Date}))
) as orderbilldate on regPatient.c_bpartner_id = orderbilldate.c_bpartner_id
left join
(
select
    conewvisit.c_bpartner_id,
    count(conewvisit.c_bpartner_id) as countnewvisit
from c_order conewvisit
where
    conewvisit.ad_client_id = $P{AD_CLIENT_ID} and conewvisit.bh_newvisit = 'Y'
group by conewvisit.c_bpartner_id
) as newvisitcount on orderbilldate.c_bpartner_id = newvisitcount.c_bpartner_id
left join
(
select
    coreattendace.c_bpartner_id,
    count(coreattendace.c_bpartner_id) as countreattendace
from c_order coreattendace
where
    coreattendace.ad_client_id = $P{AD_CLIENT_ID} and coreattendace.bh_newvisit = 'N'
group by coreattendace.c_bpartner_id
) as reattendacecount on orderbilldate.c_bpartner_id = reattendacecount.c_bpartner_id
left join
(
select
    coreferralsfromhf.c_bpartner_id,
    count(coreferralsfromhf.c_bpartner_id) as countreferralsfromhf
from c_order coreferralsfromhf
where
    coreferralsfromhf.ad_client_id = $P{AD_CLIENT_ID} and coreferralsfromhf.bh_referral = 'hf'
group by coreferralsfromhf.c_bpartner_id
) as referralsfromhfcount on orderbilldate.c_bpartner_id = referralsfromhfcount.c_bpartner_id
left join
(
select
    coreferralstootherhf.c_bpartner_id,
    count(coreferralstootherhf.c_bpartner_id) as countreferralstootherhf
from c_order coreferralstootherhf
where
    coreferralstootherhf.ad_client_id = $P{AD_CLIENT_ID} and coreferralstootherhf.bh_referral = 'OHF'
group by coreferralstootherhf.c_bpartner_id
) as referralstootherhfcount on orderbilldate.c_bpartner_id = referralstootherhfcount.c_bpartner_id
left join
(
select
    coreferalsfromcu.c_bpartner_id,
    count(coreferalsfromcu.c_bpartner_id) as countreferalsfromcu
from c_order coreferalsfromcu
where
    coreferalsfromcu.ad_client_id = $P{AD_CLIENT_ID} and coreferalsfromcu.bh_referral = 'fcu'
group by coreferalsfromcu.c_bpartner_id
) as referalsfromcucount on orderbilldate.c_bpartner_id = referalsfromcucount.c_bpartner_id
left join
(
select
    coreferaltocu.c_bpartner_id,
    count(coreferaltocu.c_bpartner_id) as countreferaltocu
from c_order coreferaltocu
where
    coreferaltocu.ad_client_id = $P{AD_CLIENT_ID} and coreferaltocu.bh_referral = 'tcu'
group by coreferaltocu.c_bpartner_id
) as referaltocucount on orderbilldate.c_bpartner_id = referaltocucount.c_bpartner_id
group by orderbilldate.billdate
order by orderbilldate.billdate asc;]]>
		</queryString>
		<field name="billingdate" class="java.sql.Date">
			<property name="com.jaspersoft.studio.field.label" value="billingdate"/>
		</field>
		<field name="no1stattendances" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="no1stattendances"/>
		</field>
		<field name="reattendances" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="reattendances"/>
		</field>
		<field name="referralsfromhf" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="referralsfromhf"/>
		</field>
		<field name="referralstootherhf" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="referralstootherhf"/>
		</field>
		<field name="referalsfromcu" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="referalsfromcu"/>
		</field>
		<field name="referaltocu" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="referaltocu"/>
		</field>
	</subDataset>
	<parameter name="Begin Date" class="java.util.Date"/>
	<parameter name="End Date" class="java.util.Date"/>
	<parameter name="AD_CLIENT_ID" class="java.lang.Integer" isForPrompting="false"/>
	<queryString>
		<![CDATA[select orderbilldate.billdate as billingdate
from
(
select distinct patient.c_bpartner_id
from c_bpartner patient
where patient.ad_client_id = $P{AD_CLIENT_ID} and patient.iscustomer = 'Y'
) as regPatient
inner join
(
select
    cobilldate.c_bpartner_id,
    date(cobilldate.dateordered) as billdate
from c_order cobilldate
where
    cobilldate.ad_client_id =  $P{AD_CLIENT_ID} and (date(cobilldate.dateordered) BETWEEN date($P{Begin Date}) AND date($P{End Date}))
) as orderbilldate on regPatient.c_bpartner_id = orderbilldate.c_bpartner_id
group by orderbilldate.billdate;]]>
	</queryString>
	<field name="billingdate" class="java.sql.Date">
		<property name="com.jaspersoft.studio.field.label" value="billingdate"/>
	</field>
	<pageHeader>
		<band height="20">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<textField>
				<reportElement x="0" y="0" width="940" height="20" uuid="947243ed-9be3-4c40-b0cb-5ddd8d24d4b6">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.25" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["MoH705A Patient Visits and Referrals Totals Between " + new SimpleDateFormat("dd MMM yyyy").format($P{Begin Date}) + " and " + new SimpleDateFormat("dd MMM yyyy").format($P{End Date})]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<summary>
		<band height="47" splitType="Stretch">
			<property name="local_mesure_unitheight" value="pixel"/>
			<componentElement>
				<reportElement x="0" y="0" width="940" height="47" uuid="f14d8dd9-6afe-42ed-95cc-9ac1bc965f2f">
					<property name="com.jaspersoft.studio.table.style.table_header" value="Table_TH"/>
					<property name="com.jaspersoft.studio.table.style.column_header" value="Table_CH"/>
					<property name="com.jaspersoft.studio.table.style.detail" value="Table_TD"/>
				</reportElement>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="tableDataset" uuid="7764ad5d-74a8-420c-b8b3-855ff94f0b96">
						<datasetParameter name="AD_CLIENT_ID">
							<datasetParameterExpression><![CDATA[$P{AD_CLIENT_ID}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="Begin Date">
							<datasetParameterExpression><![CDATA[$P{Begin Date}]]></datasetParameterExpression>
						</datasetParameter>
						<datasetParameter name="End Date">
							<datasetParameterExpression><![CDATA[$P{End Date}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="90" uuid="6479be6c-9fcf-487c-9648-57ef04c10faf">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column1"/>
						<jr:columnHeader style="Table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="df43c5b4-a476-41d2-8d6b-a7e3adc21d04"/>
								<box leftPadding="2"/>
								<textElement>
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Date]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<textField pattern="dd MMM yyyy">
								<reportElement x="0" y="0" width="90" height="17" uuid="e62116ec-c849-44ae-a0a1-856c30fa61d1"/>
								<box leftPadding="2"/>
								<textElement>
									<font fontName="DejaVu Sans" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{billingdate}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="150" uuid="c70f23cf-3998-4bb8-b0fa-f38a6cf7f0fc">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column2"/>
						<jr:columnHeader style="Table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="150" height="30" uuid="e765eb13-8784-4ce3-9d42-ed8903a1b0f6"/>
								<box leftPadding="2"/>
								<textElement>
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Number of first attendances]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField>
								<reportElement x="0" y="0" width="150" height="17" uuid="07b8aabd-83f7-4e81-ba21-ecefc6913d66"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Right">
									<font fontName="DejaVu Sans" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{no1stattendances}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="130" uuid="b83c98b6-0ee6-4c27-bdda-57854ff8e2de">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column3"/>
						<jr:columnHeader style="Table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="130" height="30" uuid="fcb83053-fe70-4c5e-bc29-f47180d8f859"/>
								<box leftPadding="2"/>
								<textElement>
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Re-attendances
]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField>
								<reportElement x="0" y="0" width="130" height="17" uuid="90250899-013b-43e2-8210-8e6b35cd4361"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Right">
									<font fontName="DejaVu Sans" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{reattendances}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="130" uuid="9cebca90-b3c8-44b6-8332-f43cbef748b6">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column4"/>
						<jr:columnHeader style="Table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="130" height="30" uuid="6bec2859-0851-4741-94a2-c16100aa3528"/>
								<box leftPadding="2"/>
								<textElement>
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Referrals from health facilities]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField>
								<reportElement x="0" y="0" width="130" height="17" uuid="efe088b5-04f0-44e5-85f0-76ee4b167970"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Right">
									<font fontName="DejaVu Sans" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{referralsfromhf}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="150" uuid="053ad6f2-558a-451b-b02c-d501fda9b4d5">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column5"/>
						<jr:columnHeader style="Table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="150" height="30" uuid="cdb46281-ef0f-40fc-9508-ca8b1f511b9c"/>
								<box leftPadding="2"/>
								<textElement>
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Referrals to other health facility]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField>
								<reportElement x="0" y="0" width="150" height="17" uuid="6a2127f7-1c65-4603-a662-4bc6ffef0856"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Right">
									<font fontName="DejaVu Sans" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{referralstootherhf}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="150" uuid="e94cda69-f834-4a7a-9666-3cfe909c64c5">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column6"/>
						<jr:columnHeader style="Table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="150" height="30" uuid="a762aa7b-ebd3-45bc-a1f9-fa306295bc8e"/>
								<box leftPadding="2"/>
								<textElement>
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Referrals from Community Unit]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField>
								<reportElement x="0" y="0" width="150" height="17" uuid="27ada4c6-1e33-4331-977c-de755a952ccd"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Right">
									<font fontName="DejaVu Sans" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{referalsfromcu}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="140" uuid="3127f156-f66e-4543-a3f5-bc8ed24d20e7">
						<property name="com.jaspersoft.studio.components.table.model.column.name" value="Column7"/>
						<jr:columnHeader style="Table_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="140" height="30" uuid="ef0f0ef3-3871-41c2-bdbf-9cf2f3ab10a5"/>
								<box leftPadding="2"/>
								<textElement>
									<font fontName="DejaVu Sans" size="12" isBold="true"/>
								</textElement>
								<text><![CDATA[Referral to Community Unit]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="Table_TD" height="17">
							<textField>
								<reportElement x="0" y="0" width="140" height="17" uuid="bb857d73-7b44-4ca7-9772-b7335d065772"/>
								<box leftPadding="2"/>
								<textElement textAlignment="Right">
									<font fontName="DejaVu Sans" size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{referaltocu}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</summary>
	<noData>
		<band height="16">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<staticText>
				<reportElement key="" x="0" y="0" width="940" height="16" uuid="d21bcff7-1082-4932-ad9a-6db006b14a4b"/>
				<textElement textAlignment="Left" verticalAlignment="Middle">
					<font isBold="false" isItalic="true"/>
				</textElement>
				<text><![CDATA[No data was found to display on the report.]]></text>
			</staticText>
		</band>
	</noData>
</jasperReport>
